(this.webpackJsonpwastelink=this.webpackJsonpwastelink||[]).push([[12],{1013:function(e,t,a){},1292:function(e,t,a){"use strict";a.r(t);var n=a(782),c=a.n(n),r=a(783),s=a(40),l=a(0),o=a.n(l),i=(a(1013),a(1014),a(1305)),m=a(1306),u=a(138),d=a(1296),f=a(1015),E=a.n(f),p=a(34),h=a.n(p),y=a(1021),N=a.n(y),v=a(248);t.default=function(){var e=Object(l.useRef)(),t=Object(l.useState)([]),a=Object(s.a)(t,2),n=a[0],f=a[1];Object(l.useCallback)((function(){var t=e.current.getScreenshot();console.log(t)}),[]),console.log(h()().format("HH:mm:ss"));var p=Object(l.useState)("IN"),y=Object(s.a)(p,2),g=y[0],b=y[1],x=Object(l.useState)("Entry Time Qrcode Scan"),k=Object(s.a)(x,2),S=k[0],j=k[1],w=function(e){b(e),"IN"===e?(j("Entry Time Qrcode Scan"),f([]),document.querySelector(".attendanceChecker").style.backgroundColor="white",document.querySelector(".btn2").classList.remove("doneBtn"),document.querySelector(".btn1").classList.add("doneBtn")):"OUT"===e&&(j("Exit Time Qrcode Scan"),f([]),document.querySelector(".attendanceChecker").style.backgroundColor="floralwhite",document.querySelector(".btn1").classList.remove("doneBtn"),document.querySelector(".btn2").classList.add("doneBtn"))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"extryExitBtn"},o.a.createElement(u.a,{onClick:function(){return w("IN")},type:"default",shape:"circle",size:"large",className:"btn1 doneBtn"},"IN"),o.a.createElement(u.a,{onClick:function(){return w("OUT")},style:{marginLeft:"15px"},type:"default",shape:"circle",size:"large",className:"btn2"},"OUT")),o.a.createElement("div",{className:"attendanceChecker"},o.a.createElement("h3",{className:"txt mb-3"},S),o.a.createElement("div",{className:"d-flex flex-row"},o.a.createElement("div",{className:"cameraView"},(null===n||void 0===n?void 0:n.length)>0?o.a.createElement("div",{className:"d-flex flex-column"},o.a.createElement("div",{className:"userInfo"},o.a.createElement("div",{className:"userImg"},o.a.createElement(d.a,{width:100,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"})),o.a.createElement("div",{className:"info"},o.a.createElement("span",{className:"_title"},"ID"),o.a.createElement("span",{className:"_val"},n[0].empID)),o.a.createElement("div",{className:"info"},o.a.createElement("span",{className:"_title"},"Name"),o.a.createElement("span",{className:"_val"},n[0].name)),o.a.createElement("div",{className:"info"},o.a.createElement("span",{className:"_title"},"IN"===g?"Entry Time":"Exit Time"),o.a.createElement("span",{className:"_val"},h()().format("h:mm A"))),o.a.createElement("div",{className:"info"},o.a.createElement("span",{className:"_title"},"Branch"),o.a.createElement("span",{className:"_val"},n[0].branch)),o.a.createElement("div",{className:"info"},o.a.createElement("span",{className:"_title"},"Role"),o.a.createElement("span",{className:"_val"},n[0].role))),o.a.createElement("div",{className:"d-flex flex-row justify-content-center mt-5"},o.a.createElement(u.a,{onClick:function(){f([])},type:"primary",size:"large"},"Reset"))):o.a.createElement(E.a,{delay:300,onError:function(e){console.log(e)},onScan:function(e){console.log(e);var t=h()().format("YYYY-MM-DD");null!==e&&0===n.length&&fetch("".concat(v.a,"/attendanceInput/?empID=").concat(e,"&daydate=").concat(t)).then((function(e){return e.json()})).then((function(t){(function(){var a=Object(r.a)(c.a.mark((function a(){var n,r,s,l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("".concat(v.a,"/register/?empID=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=a.sent,a.next=6,n.json();case 6:if(r=a.sent,f(r),console.log(t),"IN"!==g){a.next=13;break}0===t.length?(s={empID:e,timing_in:h()().format("HH:mm:ss"),status:"P"},fetch("".concat(v.a,"/attendanceInput/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e),N.a.fire({icon:"success",title:"Attendance Successfully Marked",showConfirmButton:!1,timer:1500})})).catch((function(e){N.a.fire({icon:"error",title:"Something went wrong"}),console.error("ERROR: ".concat(e))}))):(f([]),N.a.fire({icon:"error",title:"Already Exist",text:"Already Exist"})),a.next=26;break;case 13:if("OUT"!==g){a.next=26;break}if(console.log(t),!(t.length>0)){a.next=24;break}if(""===t[0].timing_out){a.next=20;break}return f([]),N.a.fire({icon:"error",title:"Employee already exited!"}),a.abrupt("return",!1);case 20:l={empID:e,timing_in:t[0].timing_in,timing_out:h()().format("HH:mm:ss"),status:t[0].status},fetch("".concat(v.a,"/attendanceList/").concat(t[0].id,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){N.a.fire({icon:"success",title:"Attendance Successfully Marked",showConfirmButton:!1,timer:1500})})).catch((function(e){N.a.fire({icon:"error",title:"Something went wrong"}),console.error("ERROR: ".concat(e))})),a.next=26;break;case 24:f([]),N.a.fire({icon:"error",title:"Employee Entry not exist",text:"Employee Entry not exist"});case 26:a.next=31;break;case 28:a.prev=28,a.t0=a.catch(0),console.error("ERROR: ".concat(a.t0));case 31:case"end":return a.stop()}}),a,null,[[0,28]])})));return function(){return a.apply(this,arguments)}})()()}))},style:{width:"400px",height:"400px"}})),o.a.createElement("div",{className:"rightText"},o.a.createElement("div",{className:"con1"},o.a.createElement("div",{className:"QrcodeDiv styl"},o.a.createElement("span",{className:"txt"},"Scan QR Code"),o.a.createElement("div",{className:"iconDiv"},n.length>0?o.a.createElement("div",{className:"rightTick"},o.a.createElement(i.a,null)):o.a.createElement("div",{className:"loading"},o.a.createElement(m.a,null)))))))))}}}]);
//# sourceMappingURL=12.3dd3fa32.chunk.js.map